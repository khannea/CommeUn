{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\khanh\\\\workspace\\\\commeun\\\\frontend\\\\src\\\\components\\\\Login.js\";\nimport React, { Component } from \"react\";\nimport Logout from \"./Logout\";\nimport \"./Login.css\";\nimport { connect } from \"react-redux\";\nimport { authBegin, authSuccess } from \"../store/actions\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport styles from \"./sidebarStyle.js\";\nimport Button from \"@material-ui/core/Button\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      pseudo: \"\",\n      password: \"\",\n      falsePassword: false,\n      connected: false\n    };\n\n    this.checkToken = () => {\n      // const req = new Request(\"https://testkhannea.herokuapp.com/checkToken\", {\n      const req = new Request(\"/api/checkToken\", {\n        method: \"GET\",\n        cache: \"default\",\n        credentials: \"include\"\n      });\n      fetch(req).then(res => {\n        console.log(\"checkToken status: \" + res.status);\n\n        if (res.status === 200) {\n          console.log(\"Vous etes connecté\");\n          this.setState({\n            connected: true,\n            falsePassword: false\n          });\n          this.props.dispatch(authBegin());\n          this.props.dispatch(authSuccess());\n        } else {\n          this.setState({\n            connected: false\n          });\n          console.log(\"Vous n'etes pas connecté\");\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleInputChange = event => {\n      const _event$target = event.target,\n            value = _event$target.value,\n            name = _event$target.name;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.register = event => {\n      event.preventDefault(); // fetch(\"https://testkhannea.herokuapp.com/register\", {\n\n      fetch(\"/api/register\", {\n        method: \"POST\",\n        body: JSON.stringify(this.state),\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => {\n        if (response.status === 401) {\n          this.setState({\n            falsePassword: true\n          });\n        }\n      }).catch(error => console.error(\"Error:\", error));\n    };\n\n    this.onSubmit = event => {\n      event.preventDefault(); // fetch(\"https://testkhannea.herokuapp.com/authenticate\", {\n\n      fetch(\"/api/authenticate\", {\n        method: \"POST\",\n        body: JSON.stringify(this.state),\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => {\n        if (res.status === 401) {\n          this.setState({\n            falsePassword: true\n          });\n        } else if (res.status === 404) {\n          console.log(\"Probleme serveur\");\n        } else {\n          // console.log(res.headers.get(\"pseudo\"));\n          localStorage.setItem(\"pseudo\", res.headers.get(\"pseudo\"));\n          localStorage.setItem(\"token\", res.headers.get(\"token\"));\n          localStorage.setItem(\"budget\", res.headers.get(\"budget\"));\n        } // for(let entry of res.headers.entries()) {\n        //   console.log(entry);\n        // }\n\n\n        this.checkToken();\n      }).catch(error => console.error(\"Error:\", error));\n    };\n\n    this.handler = () => {\n      this.checkToken();\n    };\n  }\n\n  componentDidMount() {\n    this.checkToken();\n  }\n\n  render() {\n    const classes = this.props.classes;\n    const _this$state = this.state,\n          falsePassword = _this$state.falsePassword,\n          connected = _this$state.connected;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"notification\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, falsePassword && React.createElement(\"div\", {\n      className: \"alert alert-danger m-0\",\n      role: \"alert\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Mauvais identifiants.\"), this.props.auth && React.createElement(\"div\", {\n      className: \"alert alert-success m-0\",\n      role: \"alert\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Vous etes bien connect\\xE9!\"), !this.props.auth && !falsePassword && React.createElement(\"div\", {\n      className: \"alert alert-warning m-0 invisible\",\n      role: \"alert\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Rien\")), React.createElement(\"div\", {\n      id: \"login_logout_wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, !this.props.auth && React.createElement(\"div\", {\n      className: \"login my-4 mx-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"h2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Connexion:\"), React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"pseudo\",\n      name: \"pseudo\",\n      placeholder: \"Pseudo\",\n      value: this.state.pseudo,\n      onChange: this.handleInputChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"Password\",\n      value: this.state.password,\n      onChange: this.handleInputChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row my-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Button, {\n      size: \"small\",\n      variant: \"contained\",\n      color: \"primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Se connecter\"), React.createElement(Button, {\n      size: \"small\",\n      variant: \"contained\",\n      color: \"primary\",\n      type: \"button\",\n      onClick: this.register,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"S'inscrire\"))))), this.props.auth && React.createElement(\"div\", {\n      className: \"logout_box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(Logout, {\n      action: this.handler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  loading: state.loading,\n  error: state.error\n}); // export default Login;\n\n\nexport default connect(mapStateToProps)(withStyles(styles)(Login));","map":{"version":3,"sources":["C:/Users/khanh/workspace/commeun/frontend/src/components/Login.js"],"names":["React","Component","Logout","connect","authBegin","authSuccess","withStyles","styles","Button","Login","state","pseudo","password","falsePassword","connected","checkToken","req","Request","method","cache","credentials","fetch","then","res","console","log","status","setState","props","dispatch","catch","err","handleInputChange","event","target","value","name","register","preventDefault","body","JSON","stringify","headers","response","error","onSubmit","localStorage","setItem","get","handler","componentDidMount","render","classes","auth","mapStateToProps","loading"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Logout from \"./Logout\";\r\nimport \"./Login.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { authBegin, authSuccess } from \"../store/actions\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"./sidebarStyle.js\";\r\nimport Button from \"@material-ui/core/Button\";\r\nclass Login extends Component {\r\n  state = {\r\n    pseudo: \"\",\r\n    password: \"\",\r\n    falsePassword: false,\r\n    connected: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.checkToken();\r\n  }\r\n\r\n  checkToken = () => {\r\n    // const req = new Request(\"https://testkhannea.herokuapp.com/checkToken\", {\r\n    const req = new Request(\"/api/checkToken\", {\r\n      method: \"GET\",\r\n      cache: \"default\",\r\n      credentials: \"include\"\r\n    });\r\n    fetch(req)\r\n      .then(res => {\r\n        console.log(\"checkToken status: \" + res.status);\r\n        if (res.status === 200) {\r\n          console.log(\"Vous etes connecté\");\r\n          this.setState({ connected: true, falsePassword: false });\r\n\r\n          this.props.dispatch(authBegin());\r\n          this.props.dispatch(authSuccess());\r\n        } else {\r\n          this.setState({ connected: false });\r\n          console.log(\"Vous n'etes pas connecté\");\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  handleInputChange = event => {\r\n    const { value, name } = event.target;\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  };\r\n\r\n  register = event => {\r\n    event.preventDefault();\r\n    // fetch(\"https://testkhannea.herokuapp.com/register\", {\r\n    fetch(\"/api/register\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(this.state),\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    })\r\n      .then(response => {\r\n        if (response.status === 401) {\r\n          this.setState({ falsePassword: true });\r\n        }\r\n      })\r\n      .catch(error => console.error(\"Error:\", error));\r\n  };\r\n\r\n  onSubmit = event => {\r\n    event.preventDefault();\r\n    // fetch(\"https://testkhannea.herokuapp.com/authenticate\", {\r\n    fetch(\"/api/authenticate\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(this.state),\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    })\r\n      .then(res => {\r\n        if (res.status === 401) {\r\n          this.setState({ falsePassword: true });\r\n        } else if (res.status === 404) {\r\n          console.log(\"Probleme serveur\");\r\n        } else {\r\n          // console.log(res.headers.get(\"pseudo\"));\r\n          localStorage.setItem(\"pseudo\", res.headers.get(\"pseudo\"));\r\n          localStorage.setItem(\"token\", res.headers.get(\"token\"));\r\n          localStorage.setItem(\"budget\", res.headers.get(\"budget\"));\r\n        }\r\n        // for(let entry of res.headers.entries()) {\r\n        //   console.log(entry);\r\n        // }\r\n        this.checkToken();\r\n      })\r\n      .catch(error => console.error(\"Error:\", error));\r\n  };\r\n\r\n  handler = () => {\r\n    this.checkToken();\r\n  };\r\n\r\n  render() {\r\n    const classes = this.props.classes;\r\n    const { falsePassword, connected } = this.state;\r\n    return (\r\n      <div>\r\n        <div className=\"notification\">\r\n          {falsePassword && (\r\n            <div className=\"alert alert-danger m-0\" role=\"alert\">\r\n              Mauvais identifiants.\r\n            </div>\r\n          )}\r\n          {this.props.auth && (\r\n            <div className=\"alert alert-success m-0\" role=\"alert\">\r\n              Vous etes bien connecté!\r\n            </div>\r\n          )}\r\n          {!this.props.auth && !falsePassword && (\r\n            <div className=\"alert alert-warning m-0 invisible\" role=\"alert\">\r\n              Rien\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div id=\"login_logout_wrapper\">\r\n          {/* <div className=\"login_box\"> */}\r\n          {!this.props.auth && (\r\n            <div className=\"login my-4 mx-5\">\r\n              <div className=\"h2\">Connexion:</div>\r\n              <form onSubmit={this.onSubmit}>\r\n                <div className=\"row\">\r\n                  <div className=\"col\">\r\n                    <input\r\n                      className=\"form-control\"\r\n                      type=\"pseudo\"\r\n                      name=\"pseudo\"\r\n                      placeholder=\"Pseudo\"\r\n                      value={this.state.pseudo}\r\n                      onChange={this.handleInputChange}\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"col\">\r\n                    <input\r\n                      className=\"form-control\"\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      placeholder=\"Password\"\r\n                      value={this.state.password}\r\n                      onChange={this.handleInputChange}\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"row my-4\">\r\n                  <div className=\"col\">\r\n                    <Button\r\n                      size=\"small\"\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      type=\"submit\"\r\n                    >\r\n                      Se connecter\r\n                    </Button>\r\n                    <Button\r\n                      size=\"small\"\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      type=\"button\"\r\n                      onClick={this.register}\r\n                    >\r\n                      S'inscrire\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n          {/* </div> */}\r\n\r\n          {this.props.auth && (\r\n            <div className=\"logout_box\">\r\n              <Logout action={this.handler} />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  auth: state.auth,\r\n  loading: state.loading,\r\n  error: state.error\r\n});\r\n\r\n// export default Login;\r\nexport default connect(mapStateToProps)(withStyles(styles)(Login));\r\n"]},"metadata":{},"sourceType":"module"}