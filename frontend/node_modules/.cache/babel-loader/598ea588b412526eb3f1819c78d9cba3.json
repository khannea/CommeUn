{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\khanh\\\\workspace\\\\Code\\\\commeun\\\\frontend\\\\src\\\\views\\\\ForumView.jsx\";\nimport React, { Component } from \"react\";\nimport Topic from \"../components/Topic\";\nimport AddTopic from \"../components/AddTopic\";\nimport Button from \"@material-ui/core/Button\";\n\nclass ForumView extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      addpost_enable: false\n    };\n\n    this.goToTopic = id => {\n      let path = `/Layout/Topic/` + id;\n      this.props.history.push(path);\n    };\n\n    this.getDataFromDb = () => {\n      // const req = new Request(\"http://localhost:4000/topics\", {\n      // const req = new Request(\"https://testkhannea.herokuapp.com/topics\", {\n      const req = new Request(\"/api/topics\", {\n        method: \"GET\",\n        cache: \"default\",\n        credentials: \"include\"\n      });\n      fetch(req).then(res => {\n        if (res.status === 401) {} else {\n          return res.json();\n        }\n      }).then(data => {\n        this.setState({\n          data: data\n        });\n      });\n    };\n\n    this.getCookie = () => {\n      // const req = new Request(\"http://localhost:4000/setuser\", {\n      // const req = new Request(\"https://testkhannea.herokuapp.com/setuser\", {\n      const req = new Request(\"/api/setuser\", {\n        method: \"GET\",\n        cache: \"default\",\n        credentials: \"include\"\n      });\n      fetch(req).then(res => {\n        if (res.status === 401) {\n          console.log(\"ForumAccueil n'a pas recu les categories\");\n        } else {// console.log(\"Requete cookie reussie!!\");\n          // return res.json();\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getDataFromDb();\n    this.getCookie();\n  }\n\n  render() {\n    const data = this.state.data;\n    return React.createElement(\"div\", {\n      className: \"topics\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, data && data.map(({\n      id,\n      titre,\n      user\n    }, index) => React.createElement(Topic, {\n      titre: titre,\n      user: user,\n      key: index,\n      id: id,\n      onTopicClick: this.goToTopic,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })), !this.state.addpost_enable && React.createElement(Button, {\n      onClick: () => {\n        this.setState({\n          addpost_enable: true\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Ajouter un nouveau sujet\"), this.state.addpost_enable && React.createElement(AddTopic, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ForumView;","map":{"version":3,"sources":["C:/Users/khanh/workspace/Code/commeun/frontend/src/views/ForumView.jsx"],"names":["React","Component","Topic","AddTopic","Button","ForumView","state","data","addpost_enable","goToTopic","id","path","props","history","push","getDataFromDb","req","Request","method","cache","credentials","fetch","then","res","status","json","setState","getCookie","console","log","componentDidMount","render","map","titre","user","index"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport Topic from \"../components/Topic\";\r\nimport AddTopic from \"../components/AddTopic\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nclass ForumView extends Component {\r\n  state = {\r\n    data: null,\r\n    addpost_enable: false\r\n  };\r\n\r\n  goToTopic = id => {\r\n    let path = `/Layout/Topic/` + id;\r\n    this.props.history.push(path);\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getDataFromDb();\r\n    this.getCookie();\r\n  }\r\n\r\n  getDataFromDb = () => {\r\n    // const req = new Request(\"http://localhost:4000/topics\", {\r\n    // const req = new Request(\"https://testkhannea.herokuapp.com/topics\", {\r\n    const req = new Request(\"/api/topics\", {\r\n      method: \"GET\",\r\n      cache: \"default\",\r\n      credentials: \"include\"\r\n    });\r\n    fetch(req)\r\n      .then(res => {\r\n        if (res.status === 401) {\r\n        } else {\r\n          return res.json();\r\n        }\r\n      })\r\n      .then(data => {\r\n        this.setState({\r\n          data: data\r\n        });\r\n      });\r\n  };\r\n\r\n  getCookie = () => {\r\n    // const req = new Request(\"http://localhost:4000/setuser\", {\r\n    // const req = new Request(\"https://testkhannea.herokuapp.com/setuser\", {\r\n    const req = new Request(\"/api/setuser\", {\r\n      method: \"GET\",\r\n      cache: \"default\",\r\n      credentials: \"include\"\r\n    });\r\n    fetch(req).then(res => {\r\n      if (res.status === 401) {\r\n        console.log(\"ForumAccueil n'a pas recu les categories\");\r\n      } else {\r\n        // console.log(\"Requete cookie reussie!!\");\r\n        // return res.json();\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { data } = this.state;\r\n\r\n    return (\r\n      <div className=\"topics\">\r\n        {data &&\r\n          data.map(({ id, titre, user }, index) => (\r\n            <Topic\r\n              titre={titre}\r\n              user={user}\r\n              key={index}\r\n              id={id}\r\n              onTopicClick={this.goToTopic}\r\n            />\r\n          ))}\r\n        {!this.state.addpost_enable && (\r\n          <Button\r\n            onClick={() => {\r\n              this.setState({ addpost_enable: true });\r\n            }}\r\n          >\r\n            Ajouter un nouveau sujet\r\n          </Button>\r\n        )}\r\n        {this.state.addpost_enable && <AddTopic />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ForumView;\r\n"]},"metadata":{},"sourceType":"module"}